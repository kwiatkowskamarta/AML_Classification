# Tworzenie struktury katalogów
dirs <- c(
"data/raw",        # Tu lądują surowe pliki z TCGA (nie ruszamy ich)
"data/processed",  # Tu zapisujemy wyczyszczone tabele gotowe do ML
"scripts",         # Skrypty R (01_..., 02_...)
"results/plots",   # Wykresy (PDF/PNG)
"results/models",  # Zapisane modele ML (.rds)
"docs"             # Notatki, brudnopisy
)
for(d in dirs){
if(!dir.exists(d)) dir.create(d, recursive = TRUE)
}
print("Struktura katalogów utworzona pomyślnie!")
getwd()
# 1. Instalacja renv (jeśli nie masz)
if (!require("renv")) install.packages("renv")
# 2. Inicjalizacja środowiska w tym projekcie
renv::init()
install.packages('renv')
# 1. Instalacja renv (jeśli nie masz)
if (!require("renv")) install.packages("renv")
# 2. Inicjalizacja środowiska w tym projekcie
renv::init()
install.packages("renv")
# Usuwanie folderu blokady
unlink("C:/Users/kwiat/AppData/Local/R/win-library/4.4/00LOCK", recursive = TRUE)
install.packages("renv")
# 1. Instalacja renv (jeśli nie masz)
if (!require("renv")) install.packages("renv")
# 2. Inicjalizacja środowiska w tym projekcie
renv::init()
content_install <- c(
"# SKRYPT INSTALACYJNY (SETUP)",
"# Uruchom ten skrypt tylko raz na nowym środowisku, aby pobrać biblioteki.",
"# ------------------------------------------------------------------------",
"",
"# 1. Instalacja menedżera środowisk 'renv' (jeśli brak)",
"if (!require('renv', quietly = TRUE)) install.packages('renv')",
"",
"# 2. Aktywacja projektu (tworzy folder bibliotek wewnątrz projektu)",
"renv::init(bare = TRUE) # bare = TRUE oznacza, że startujemy na czysto",
"",
"# 3. Instalacja menedżera pakietów bioinformatycznych BiocManager",
"if (!require('BiocManager', quietly = TRUE)) install.packages('BiocManager')",
"",
"# 4. Lista wymaganych pakietów",
"bio_packages <- c(",
"  'TCGAbiolinks',       # Pobieranie danych z TCGA",
"  'SummarizedExperiment', # Obsługa struktur danych biologicznych",
"  'edgeR',              # Normalizacja danych RNA-seq",
"  'DESeq2',             # Alternatywna normalizacja",
"  'ComplexHeatmap'      # Zaawansowane wizualizacje (mapy ciepła)",
")",
"",
"ml_packages <- c(",
"  'caret',              # Framework do Machine Learning",
"  'randomForest',       # Algorytm Lasów Losowych",
"  'kernlab',            # Algorytm SVM",
"  'Boruta',             # Selekcja cech (Feature Selection)",
"  'pheatmap',           # Proste mapy ciepła",
"  'ggplot2',            # Wykresy",
"  'dplyr',              # Manipulacja danymi",
"  'e1071'               # Metryki i proste modele",
")",
"",
"# 5. Instalacja pakietów",
"message('Instalowanie pakietów z Bioconductor...')",
"BiocManager::install(bio_packages, update = FALSE, ask = FALSE)",
"",
"message('Instalowanie pakietów ML...')",
"install.packages(ml_packages)",
"",
"# 6. Zapisanie stanu bibliotek do pliku renv.lock",
"message('Zapisywanie stanu środowiska do renv.lock...')",
"renv::snapshot()",
"",
"message('GOTOWE! Środowisko jest zainstalowane i zapisane.')"
)
writeLines(content_install, "install_dependencies.R")
source("install_dependencies.R")
renv::status()
renv::install("BiocManager")
renv::snapshot()
# Upewniamy się, że folder scripts istnieje
if(!dir.exists("scripts")) dir.create("scripts")
# --- 01. POBIERANIE ---
skel_01 <- c(
"# SKRYPT 01: Data Download",
"# ------------------------------------------",
"# OPIS: Pobiera surowe dane RNA-seq i kliniczne z bazy TCGA dla projektu LAML.",
"# INPUT: Brak (pobieranie z API)",
"# OUTPUT: Plik data/raw/TCGA_LAML_Raw.RData",
"",
"# 1. Ładowanie bibliotek (TCGAbiolinks)",
"",
"# 2. Definicja zapytania (GDCquery) - dane kliniczne",
"",
"# 3. Pobranie i przygotowanie danych klinicznych",
"",
"# 4. Definicja zapytania (GDCquery) - dane transkryptomiczne (STAR - Counts)",
"",
"# 5. Pobranie i przygotowanie danych RNA-seq",
"",
"# 6. Zapisanie surowych obiektów na dysk (data/raw/)"
)
# --- 02. PREPROCESSING ---
skel_02 <- c(
"# SKRYPT 02: Data Preprocessing & Cleaning",
"# ------------------------------------------",
"# OPIS: Czyści dane, filtruje brakujące próbki i normalizuje ekspresję genów.",
"# INPUT: data/raw/TCGA_LAML_Raw.RData",
"# OUTPUT: data/processed/TCGA_LAML_Cleaned.RData",
"",
"# 1. Wczytanie surowych danych",
"",
"# 2. Przygotowanie macierzy X (geny) i wektora Y (podtypy)",
"#    - Usunięcie pacjentów bez zdefiniowanego podtypu (klasyfikacja FAB)",
"#    - Transpozycja macierzy (Pacjenci jako wiersze)",
"",
"# 3. Filtracja genów",
"#    - Usunięcie genów o zerowej wariancji (stałych)",
"#    - Usunięcie genów o bardzo niskiej ekspresji",
"",
"# 4. Normalizacja danych",
"#    - Zastosowanie transformacji logarytmicznej (log2) lub VST",
"",
"# 5. Zapisanie gotowego datasetu do folderu data/processed/"
)
# --- 03. FEATURE SELECTION ---
skel_03 <- c(
"# SKRYPT 03: Feature Selection (Boruta)",
"# ------------------------------------------",
"# OPIS: Wybiera najważniejsze geny (biomarkery) spośród 20,000 dostępnych.",
"# INPUT: data/processed/TCGA_LAML_Cleaned.RData",
"# OUTPUT: results/selected_features.rds",
"",
"# 1. Wczytanie przetworzonych danych",
"",
"# 2. Wstępna redukcja (opcjonalnie: usunięcie skorelowanych zmiennych)",
"",
"# 3. Uruchomienie algorytmu Boruta (to może potrwać!)",
"#    - Trenowanie na całym zbiorze lub tylko treningowym",
"",
"# 4. Wyświetlenie wyników (wykres ważności cech)",
"",
"# 5. Zapisanie listy wybranych genów (np. top 50-100)"
)
# --- 04. MODELING ---
skel_04 <- c(
"# SKRYPT 04: Machine Learning Models",
"# ------------------------------------------",
"# OPIS: Trenuje i porównuje modele klasyfikacyjne (RF, SVM, kNN).",
"# INPUT: data/processed/TCGA_LAML_Cleaned.RData + results/selected_features.rds",
"# OUTPUT: results/model_performance.csv",
"",
"# 1. Wczytanie danych i wyfiltrowanie tylko wybranych genów",
"",
"# 2. Podział na zbiór treningowy i testowy (np. 75/25)",
"#    - Ustawienie ziarna losowości (set.seed) dla powtarzalności",
"",
"# 3. Konfiguracja walidacji krzyżowej (np. 5-fold CV)",
"",
"# 4. Trening modeli:",
"#    - Model 1: k-NN (Baseline)",
"#    - Model 2: SVM (Linear/Radial)",
"#    - Model 3: Random Forest",
"",
"# 5. Predykcja na zbiorze testowym",
"",
"# 6. Ewaluacja i wizualizacja",
"#    - Macierze pomyłek (Confusion Matrix)",
"#    - Porównanie metryk (Accuracy, Kappa)",
"",
"# 7. Zapisanie wyników"
)
writeLines(skel_01, "scripts/01_data_download.R")
writeLines(skel_02, "scripts/02_preprocessing.R")
writeLines(skel_03, "scripts/03_feature_selection.R")
writeLines(skel_04, "scripts/04_modeling.R")
print("Szkielety plików utworzone pomyślnie!")
